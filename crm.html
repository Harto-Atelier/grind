<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM @harto_fr ‚Äî 66k Followers</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #000;
            --card: #111;
            --primary: #FF6B00;
            --blue: #3B82F6;
            --green: #22C55E;
            --yellow: #EAB308;
            --red: #EF4444;
            --purple: #A855F7;
            --cyan: #06B6D4;
            --text: #fff;
            --muted: #71717A;
            --border: #27272A;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #111 0%, #1a1a1a 100%);
            padding: 20px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 800;
            font-size: 1.5rem;
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .back-btn {
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        .back-btn:hover { background: #222; }
        
        /* Stats Bar */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        .stat-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }
        .stat-value {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), #ff9500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stat-label {
            font-size: 0.75rem;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Search & Filters */
        .search-section {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .search-input {
            flex: 1;
            min-width: 200px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 12px 16px;
            color: var(--text);
            font-size: 1rem;
        }
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        .filter-btn {
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--muted);
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .filter-btn:hover, .filter-btn.active {
            background: var(--primary);
            color: var(--text);
            border-color: var(--primary);
        }
        
        /* Category Pills */
        .categories {
            display: flex;
            gap: 8px;
            padding: 15px 20px;
            overflow-x: auto;
            border-bottom: 1px solid var(--border);
        }
        .cat-pill {
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--muted);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            white-space: nowrap;
            transition: all 0.2s;
        }
        .cat-pill:hover { border-color: var(--primary); color: var(--text); }
        .cat-pill.active { background: var(--primary); color: var(--text); border-color: var(--primary); }
        .cat-pill .count {
            background: rgba(255,255,255,0.2);
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 6px;
            font-size: 0.75rem;
        }
        
        /* Contact List */
        .contacts-container {
            padding: 20px;
        }
        .section-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .section-title .badge {
            background: var(--primary);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 15px;
        }
        .contact-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.2s;
            cursor: pointer;
        }
        .contact-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        .contact-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        .contact-info {
            display: flex;
            gap: 12px;
        }
        .contact-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), #ff9500);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }
        .contact-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }
        .contact-name {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 2px;
        }
        .contact-handle {
            color: var(--muted);
            font-size: 0.85rem;
        }
        .contact-verified {
            color: var(--blue);
            margin-left: 5px;
        }
        .contact-category {
            background: var(--card);
            border: 1px solid var(--border);
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 0.75rem;
            color: var(--muted);
        }
        .contact-category.ordinals { border-color: var(--primary); color: var(--primary); }
        .contact-category.artist { border-color: var(--purple); color: var(--purple); }
        .contact-category.collector { border-color: var(--green); color: var(--green); }
        .contact-category.trader { border-color: var(--yellow); color: var(--yellow); }
        .contact-category.developer { border-color: var(--cyan); color: var(--cyan); }
        .contact-category.marketing { border-color: var(--red); color: var(--red); }
        .contact-category.brand { border-color: var(--blue); color: var(--blue); }
        
        .contact-bio {
            color: var(--muted);
            font-size: 0.85rem;
            line-height: 1.4;
            margin-bottom: 12px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .contact-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 12px;
        }
        .contact-stat {
            text-align: center;
        }
        .contact-stat-value {
            font-weight: 700;
            font-size: 1rem;
        }
        .contact-stat-label {
            font-size: 0.7rem;
            color: var(--muted);
            text-transform: uppercase;
        }
        .contact-actions {
            display: flex;
            gap: 8px;
        }
        .action-btn {
            flex: 1;
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .action-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
        }
        .action-btn.primary {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        /* Priority Section */
        .priority-section {
            background: linear-gradient(135deg, rgba(255,107,0,0.1), rgba(255,107,0,0.05));
            border: 1px solid rgba(255,107,0,0.3);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
        }
        .priority-title {
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .priority-title span {
            background: var(--primary);
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
        }
        
        /* Outreach Funnel */
        .funnel {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
        }
        .funnel-title {
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 20px;
        }
        .funnel-stages {
            display: flex;
            justify-content: space-between;
            position: relative;
        }
        .funnel-stages::before {
            content: '';
            position: absolute;
            top: 25px;
            left: 10%;
            right: 10%;
            height: 4px;
            background: var(--border);
        }
        .funnel-stage {
            text-align: center;
            position: relative;
            z-index: 1;
        }
        .stage-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--card);
            border: 3px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem;
            margin: 0 auto 10px;
        }
        .stage-circle.active {
            border-color: var(--primary);
            color: var(--primary);
        }
        .stage-label {
            font-size: 0.8rem;
            color: var(--muted);
        }
        .stage-count {
            font-weight: 700;
            font-size: 1.1rem;
            margin-top: 5px;
        }
        
        /* Load More */
        .load-more {
            text-align: center;
            padding: 30px;
        }
        .load-more-btn {
            background: linear-gradient(135deg, var(--primary), #ff9500);
            border: none;
            color: var(--text);
            padding: 15px 40px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Mobile */
        @media (max-width: 768px) {
            .stats-bar { grid-template-columns: repeat(2, 1fr); }
            .stat-value { font-size: 1.4rem; }
            .contact-grid { grid-template-columns: 1fr; }
            .funnel-stages { flex-wrap: wrap; gap: 20px; }
            .funnel-stages::before { display: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-top">
            <div class="logo">
                <div class="logo-icon">üìä</div>
                <span>CRM @harto_fr</span>
            </div>
            <a href="index.html" class="back-btn">‚Üê Dashboard</a>
        </div>
        
        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-value" id="totalContacts">66,427</div>
                <div class="stat-label">Contactos</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="highValue">9,236</div>
                <div class="stat-label">Alto Valor</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="verified">6,612</div>
                <div class="stat-label">Verificados</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="ordinals">4,024</div>
                <div class="stat-label">Ordinals</div>
            </div>
        </div>
        
        <div class="search-section">
            <input type="text" class="search-input" id="searchInput" placeholder="üîç Buscar por nombre, @handle, bio...">
            <button class="filter-btn" id="filterVerified">‚úì Verificados</button>
            <button class="filter-btn" id="filterHighValue">üî• >10k followers</button>
        </div>
    </div>
    
    <div class="categories" id="categoriesBar">
        <button class="cat-pill active" data-cat="all">Todos <span class="count">66,427</span></button>
        <button class="cat-pill" data-cat="ordinals">üüß Ordinals <span class="count">4,024</span></button>
        <button class="cat-pill" data-cat="artist">üé® Artistas <span class="count">6,356</span></button>
        <button class="cat-pill" data-cat="collector">üíé Collectors <span class="count">1,770</span></button>
        <button class="cat-pill" data-cat="trader">üìà Traders <span class="count">2,889</span></button>
        <button class="cat-pill" data-cat="developer">‚ö° Developers <span class="count">2,805</span></button>
        <button class="cat-pill" data-cat="marketing">üì£ Marketing <span class="count">902</span></button>
        <button class="cat-pill" data-cat="brand">üè¢ Brands <span class="count">867</span></button>
        <button class="cat-pill" data-cat="nft_eth">üî∑ NFT/ETH <span class="count">6,573</span></button>
    </div>
    
    <div class="contacts-container">
        <!-- Outreach Funnel -->
        <div class="funnel">
            <div class="funnel-title">üéØ Outreach Funnel</div>
            <div class="funnel-stages">
                <div class="funnel-stage">
                    <div class="stage-circle active">üìã</div>
                    <div class="stage-label">Prospects</div>
                    <div class="stage-count">9,236</div>
                </div>
                <div class="funnel-stage">
                    <div class="stage-circle">üëÄ</div>
                    <div class="stage-label">Contacted</div>
                    <div class="stage-count">0</div>
                </div>
                <div class="funnel-stage">
                    <div class="stage-circle">üí¨</div>
                    <div class="stage-label">Replied</div>
                    <div class="stage-count">0</div>
                </div>
                <div class="funnel-stage">
                    <div class="stage-circle">ü§ù</div>
                    <div class="stage-label">Meeting</div>
                    <div class="stage-count">0</div>
                </div>
                <div class="funnel-stage">
                    <div class="stage-circle">üí∞</div>
                    <div class="stage-label">Closed</div>
                    <div class="stage-count">0</div>
                </div>
            </div>
        </div>
        
        <!-- Priority Contacts -->
        <div class="priority-section">
            <div class="priority-title">üî• Prioridad Alta <span>TOP 10</span></div>
            <div class="contact-grid" id="priorityContacts">
                <!-- Loaded via JS -->
            </div>
        </div>
        
        <!-- All Contacts -->
        <div class="section-title">
            üë• Todos los Contactos <span class="badge" id="showingCount">Mostrando 50</span>
        </div>
        <div class="contact-grid" id="allContacts">
            <!-- Loaded via JS -->
        </div>
        
        <div class="load-more">
            <button class="load-more-btn" id="loadMoreBtn">Cargar m√°s contactos</button>
        </div>
    </div>
    
    <script>
        let allData = [];
        let filteredData = [];
        let displayCount = 50;
        let currentCategory = 'all';
        let searchTerm = '';
        let filterVerified = false;
        let filterHighValue = false;
        
        // Format numbers
        function formatNum(n) {
            if (n >= 1000000) return (n/1000000).toFixed(1) + 'M';
            if (n >= 1000) return (n/1000).toFixed(1) + 'K';
            return n.toString();
        }
        
        // Create contact card
        function createContactCard(contact) {
            const initials = (contact.name || contact.username || '?').substring(0, 2).toUpperCase();
            const verified = contact.verified ? '<span class="contact-verified">‚úì</span>' : '';
            const avatar = contact.profilePicture 
                ? `<img src="${contact.profilePicture}" onerror="this.style.display='none';this.parentElement.innerHTML='${initials}'"/>`
                : initials;
            
            return `
                <div class="contact-card" data-username="${contact.username}">
                    <div class="contact-header">
                        <div class="contact-info">
                            <div class="contact-avatar">${avatar}</div>
                            <div>
                                <div class="contact-name">${contact.name || contact.username}${verified}</div>
                                <div class="contact-handle">@${contact.username}</div>
                            </div>
                        </div>
                        <span class="contact-category ${contact.category}">${contact.category}</span>
                    </div>
                    <div class="contact-bio">${contact.bio || 'Sin bio'}</div>
                    <div class="contact-stats">
                        <div class="contact-stat">
                            <div class="contact-stat-value">${formatNum(contact.followers)}</div>
                            <div class="contact-stat-label">Followers</div>
                        </div>
                        <div class="contact-stat">
                            <div class="contact-stat-value">${formatNum(contact.following)}</div>
                            <div class="contact-stat-label">Following</div>
                        </div>
                        <div class="contact-stat">
                            <div class="contact-stat-value">${formatNum(contact.tweets || 0)}</div>
                            <div class="contact-stat-label">Tweets</div>
                        </div>
                    </div>
                    <div class="contact-actions">
                        <a href="https://x.com/${contact.username}" target="_blank" class="action-btn">Ver Perfil</a>
                        <button class="action-btn primary" onclick="markContacted('${contact.username}')">üì© Contactar</button>
                    </div>
                </div>
            `;
        }
        
        // Filter and display
        function applyFilters() {
            filteredData = allData.filter(c => {
                // Category filter
                if (currentCategory !== 'all' && c.category !== currentCategory) return false;
                
                // Search filter
                if (searchTerm) {
                    const search = searchTerm.toLowerCase();
                    const matchName = (c.name || '').toLowerCase().includes(search);
                    const matchHandle = (c.username || '').toLowerCase().includes(search);
                    const matchBio = (c.bio || '').toLowerCase().includes(search);
                    if (!matchName && !matchHandle && !matchBio) return false;
                }
                
                // Verified filter
                if (filterVerified && !c.verified) return false;
                
                // High value filter
                if (filterHighValue && c.followers < 10000) return false;
                
                return true;
            });
            
            displayContacts();
        }
        
        function displayContacts() {
            // Priority contacts (top 10 by followers)
            const priority = [...filteredData].sort((a,b) => b.followers - a.followers).slice(0, 10);
            document.getElementById('priorityContacts').innerHTML = priority.map(createContactCard).join('');
            
            // All contacts
            const showing = filteredData.slice(0, displayCount);
            document.getElementById('allContacts').innerHTML = showing.map(createContactCard).join('');
            document.getElementById('showingCount').textContent = `Mostrando ${showing.length} de ${filteredData.length}`;
        }
        
        // Event listeners
        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchTerm = e.target.value;
            displayCount = 50;
            applyFilters();
        });
        
        document.getElementById('filterVerified').addEventListener('click', (e) => {
            filterVerified = !filterVerified;
            e.target.classList.toggle('active', filterVerified);
            displayCount = 50;
            applyFilters();
        });
        
        document.getElementById('filterHighValue').addEventListener('click', (e) => {
            filterHighValue = !filterHighValue;
            e.target.classList.toggle('active', filterHighValue);
            displayCount = 50;
            applyFilters();
        });
        
        document.querySelectorAll('.cat-pill').forEach(pill => {
            pill.addEventListener('click', () => {
                document.querySelectorAll('.cat-pill').forEach(p => p.classList.remove('active'));
                pill.classList.add('active');
                currentCategory = pill.dataset.cat;
                displayCount = 50;
                applyFilters();
            });
        });
        
        document.getElementById('loadMoreBtn').addEventListener('click', () => {
            displayCount += 50;
            displayContacts();
        });
        
        function markContacted(username) {
            alert(`üì© Abriendo DM a @${username}...\n\nEn el futuro esto trackear√≠a el estado del contacto.`);
            window.open(`https://x.com/messages/compose?recipient_id=${username}`, '_blank');
        }
        
        // Load data
        async function loadData() {
            try {
                const response = await fetch('api/crm.json');
                allData = await response.json();
                filteredData = allData;
                applyFilters();
            } catch (e) {
                console.error('Error loading CRM data:', e);
                document.getElementById('allContacts').innerHTML = '<p style="color: var(--muted); padding: 40px; text-align: center;">Error cargando datos. Aseg√∫rate de que api/crm.json existe.</p>';
            }
        }
        
        loadData();
    </script>
</body>
</html>
