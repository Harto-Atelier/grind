<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuria</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* VS Code Dark Theme (HartoStrategy Branding) */
            --bg: #1e1e1e;
            --card: #252526;
            --sidebar: #181818;
            --primary: #007acc;
            --accent: #0e639c;
            --cyan: #4ec9b0;
            --cyan-dim: rgba(78, 201, 176, 0.15);
            --cyan-border: rgba(78, 201, 176, 0.4);
            --orange: #FF6B00;
            --green: #00FF88;
            --red: #f14c4c;
            --yellow: #dcdcaa;
            --purple: #c586c0;
            --text: #d4d4d4;
            --muted: #808080;
            --border: #3c3c3c;
            /* Chart colors */
            --chart-1: #4ec9b0;
            --chart-2: #9cdcfe;
            --chart-3: #dcdcaa;
            --chart-4: #ce9178;
            --chart-5: #b5cea8;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html, body {
            overflow-x: hidden;
            max-width: 100vw;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Navigation */
        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            background: var(--bg);
            z-index: 100;
        }
        .nav-brand {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--cyan);
            letter-spacing: 2px;
        }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a {
            color: var(--muted);
            text-decoration: none;
            font-size: 0.85rem;
            transition: color 0.2s;
        }
        .nav-links a:hover, .nav-links a.active { color: var(--cyan); }
        .nav-time {
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: 'JetBrains Mono', monospace;
        }
        .nav-day {
            color: var(--muted);
            font-size: 0.85rem;
        }
        .nav-date {
            color: var(--text);
            font-size: 0.9rem;
            font-weight: 600;
        }
        .nav-clock {
            color: var(--cyan);
            font-size: 0.9rem;
        }
        
        /* Hero */
        .hero {
            padding: 50px 40px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .hero .nuria-widget {
            margin-left: auto;
        }
        .hero-content { }
        .hero-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 3rem;
            font-weight: 700;
            letter-spacing: 8px;
            margin-bottom: 10px;
        }
        .hero-sub {
            font-family: 'JetBrains Mono', monospace;
            color: var(--cyan);
            font-size: 0.85rem;
            letter-spacing: 3px;
            margin-bottom: 15px;
        }
        .hero-quote {
            color: var(--muted);
            font-style: italic;
            font-size: 0.9rem;
            max-width: 400px;
        }
        .hero-time {
            text-align: right;
        }
        .hero-date {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text);
        }
        .hero-day {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            color: var(--muted);
            margin-bottom: 10px;
        }
        .hero-clock {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            color: var(--cyan);
        }
        
        /* NURIA Widget */
        .nuria-widget {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .nuria-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            color: var(--cyan);
            letter-spacing: 3px;
            margin-bottom: 12px;
        }
        .nuria-face {
            position: relative;
            animation: nuriaBounce 3s ease-in-out infinite;
        }
        @keyframes nuriaBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
        .nuria-eyes {
            display: flex;
            gap: 25px;
        }
        .nuria-eye {
            width: 50px;
            height: 50px;
            background: var(--orange);
            border-radius: 8px;
            position: relative;
            box-shadow: 0 0 25px rgba(255,107,0,0.4);
            animation: nuriaGlow 2s ease-in-out infinite;
            transition: height 0.1s, transform 0.1s, border-radius 0.1s;
        }
        @keyframes nuriaGlow {
            0%, 100% { box-shadow: 0 0 25px rgba(255,107,0,0.4); }
            50% { box-shadow: 0 0 40px rgba(255,107,0,0.6); }
        }
        .nuria-eye::before {
            content: '';
            position: absolute;
            top: 7px;
            left: 7px;
            width: 15px;
            height: 15px;
            background: rgba(255,255,255,0.9);
            border-radius: 5px;
        }
        .nuria-eye::after {
            content: '';
            position: absolute;
            top: 24px;
            left: 28px;
            width: 6px;
            height: 6px;
            background: rgba(255,255,255,0.5);
            border-radius: 2px;
        }
        .nuria-eye.blink {
            height: 8px;
            border-radius: 8px;
            transform: translateY(21px);
        }
        .nuria-eye.blink::before, .nuria-eye.blink::after { display: none; }
        
        /* Nuria sleeping/idle state */
        .nuria-eye.sleeping {
            height: 6px;
            border-radius: 6px;
            transform: translateY(22px);
            animation: none;
            box-shadow: 0 0 15px rgba(255,107,0,0.2);
        }
        .nuria-eye.sleeping::before, .nuria-eye.sleeping::after { display: none; }
        .nuria-widget.idle .nuria-face { animation: none; }
        .nuria-widget.idle .nuria-mouth {
            width: 8px;
            height: 2px;
            border: none;
            background: var(--orange);
            border-radius: 2px;
        }
        
        /* Nuria working state - eyes move */
        .nuria-widget.working .nuria-eye {
            animation: nuriaGlow 1.5s ease-in-out infinite, nuriaLook 4s ease-in-out infinite;
        }
        @keyframes nuriaLook {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }
        .nuria-blush {
            position: absolute;
            width: 18px;
            height: 8px;
            background: rgba(255,150,150,0.3);
            border-radius: 50%;
            top: 55px;
        }
        .nuria-blush-l { left: -8px; }
        .nuria-blush-r { right: -8px; }
        .nuria-mouth {
            position: absolute;
            bottom: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 6px;
            border: 2px solid var(--orange);
            border-top: none;
            border-radius: 0 0 12px 12px;
        }
        
        /* Stats Row */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            border-bottom: 1px solid var(--border);
        }
        .stat-box {
            padding: 25px;
            text-align: center;
            border-right: 1px solid var(--border);
            transition: background 0.2s;
        }
        .stat-box:last-child { border-right: none; }
        .stat-box:hover { background: var(--cyan-dim); }
        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--cyan);
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 0.7rem;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .stat-box.highlight .stat-value { color: var(--orange); }
        .stat-box.success .stat-value { color: var(--green); }
        
        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            border-bottom: 1px solid var(--border);
        }
        .main-section {
            padding: 30px;
            border-right: 1px solid var(--border);
        }
        .main-section:last-child { border-right: none; }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }
        .section-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--cyan);
            letter-spacing: 2px;
        }
        .section-link {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--muted);
            text-decoration: none;
            transition: color 0.2s;
        }
        .section-link:hover { color: var(--cyan); }
        
        /* Tasks List */
        .task-list { display: flex; flex-direction: column; gap: 12px; }
        .task-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 1px solid var(--border);
            transition: all 0.2s;
            cursor: pointer;
        }
        .task-item:hover {
            border-color: var(--cyan-border);
            background: var(--cyan-dim);
        }
        .task-item.urgent-deadline {
            border-color: var(--red);
            background: rgba(255, 68, 68, 0.1);
            animation: urgentPulse 2s ease-in-out infinite;
        }
        @keyframes urgentPulse {
            0%, 100% { border-color: var(--red); }
            50% { border-color: rgba(255, 68, 68, 0.5); }
        }
        /* URGENT TASK HIGHLIGHTING - deadline < 3 days */
        .task-item.urgent {
            border-color: var(--red);
            background: rgba(255, 68, 68, 0.08);
        }
        .task-item.urgent:hover {
            border-color: var(--red);
            background: rgba(255, 68, 68, 0.15);
        }
        .task-item.warning {
            border-color: var(--orange);
            background: rgba(255, 107, 0, 0.08);
        }
        .task-item.warning:hover {
            border-color: var(--orange);
            background: rgba(255, 107, 0, 0.15);
        }
        .task-priority {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        .task-priority.high { background: var(--red); }
        .task-priority.medium { background: var(--yellow); }
        .task-priority.low { background: var(--green); }
        .task-content { flex: 1; min-width: 0; }
        .task-title {
            font-weight: 500;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .task-meta {
            font-size: 0.75rem;
            color: var(--muted);
            margin-top: 3px;
        }
        .task-owner {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--cyan);
            padding: 4px 8px;
            border: 1px solid var(--cyan-border);
        }
        
        /* Team Grid */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        .team-card {
            border: 1px solid var(--border);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.2s;
        }
        .team-card:hover {
            border-color: var(--cyan-border);
        }
        .team-avatar {
            width: 45px;
            height: 45px;
            border: 1px solid var(--cyan-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--cyan);
        }
        .team-info { flex: 1; }
        .team-name { font-weight: 500; }
        .team-role { font-size: 0.8rem; color: var(--muted); }
        .team-tasks {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--orange);
        }
        
        /* CRM Summary */
        .crm-summary {
            border: 1px solid var(--cyan-border);
            background: var(--cyan-dim);
            padding: 25px;
        }
        .crm-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .crm-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--cyan);
        }
        .crm-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .crm-stat {
            text-align: center;
            padding: 15px 10px;
            background: rgba(0,0,0,0.3);
        }
        .crm-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            font-weight: 700;
        }
        .crm-stat-label {
            font-size: 0.65rem;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 3px;
        }
        .crm-bar {
            height: 6px;
            background: var(--border);
            margin-bottom: 15px;
            display: flex;
            overflow: hidden;
        }
        .crm-bar-segment {
            height: 100%;
            transition: width 0.5s ease;
        }
        .crm-btn {
            display: block;
            width: 100%;
            background: var(--cyan);
            border: none;
            color: #000;
            padding: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            letter-spacing: 2px;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            transition: background 0.2s;
        }
        .crm-btn:hover { background: #5d67b0; }
        
        /* Agenda Section */
        .agenda-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            border-bottom: 1px solid var(--border);
        }
        .agenda-col {
            padding: 25px 30px;
            border-right: 1px solid var(--border);
        }
        .agenda-col:last-child { border-right: none; }
        .section-date {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--cyan);
        }
        .email-count {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--orange);
        }
        .agenda-list {
            margin-top: 15px;
        }
        .agenda-item {
            display: flex;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }
        .agenda-item:last-child { border-bottom: none; }
        .agenda-time {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--cyan);
            min-width: 50px;
        }
        .agenda-title {
            font-size: 0.9rem;
        }
        .agenda-upcoming {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }
        .upcoming-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--muted);
            margin-bottom: 10px;
            letter-spacing: 1px;
        }
        .upcoming-item {
            display: flex;
            gap: 15px;
            padding: 8px 0;
            font-size: 0.85rem;
        }
        .upcoming-date {
            font-family: 'JetBrains Mono', monospace;
            color: var(--orange);
            min-width: 60px;
        }
        .upcoming-title {
            color: var(--muted);
        }
        .email-list {
            margin-top: 15px;
        }
        .email-item {
            display: grid;
            grid-template-columns: 100px 1fr 50px;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.85rem;
        }
        .email-item:last-child { border-bottom: none; }
        .email-item.unread .email-sender,
        .email-item.unread .email-subject {
            font-weight: 600;
        }
        .email-sender {
            font-family: 'JetBrains Mono', monospace;
            color: var(--cyan);
            font-size: 0.8rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .email-subject {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .email-time {
            font-family: 'JetBrains Mono', monospace;
            color: var(--muted);
            font-size: 0.75rem;
            text-align: right;
        }
        
        /* Projects Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            border-bottom: 1px solid var(--border);
        }
        .project-card {
            padding: 25px;
            border-right: 1px solid var(--border);
            text-align: center;
            transition: all 0.2s;
            cursor: pointer;
        }
        .project-card:last-child { border-right: none; }
        .project-card:hover { background: var(--cyan-dim); }
        .project-icon { font-size: 2rem; margin-bottom: 10px; }
        .project-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        .project-tasks {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--orange);
        }
        .project-label {
            font-size: 0.7rem;
            color: var(--muted);
        }
        
        /* Quick Links */
        .quick-section {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            border-bottom: 1px solid var(--border);
        }
        .quick-link {
            padding: 25px;
            text-align: center;
            border-right: 1px solid var(--border);
            text-decoration: none;
            color: var(--muted);
            transition: all 0.2s;
        }
        .quick-link:last-child { border-right: none; }
        .quick-link:hover {
            background: var(--cyan-dim);
            color: var(--cyan);
        }
        .quick-icon { font-size: 1.5rem; margin-bottom: 8px; }
        .quick-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            letter-spacing: 1px;
        }
        
        /* Quick Actions Section */
        .quick-actions-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            border-bottom: 1px solid var(--border);
            background: rgba(77, 87, 160, 0.05);
        }
        .quick-action-btn {
            padding: 20px 15px;
            text-align: center;
            border-right: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
            background: transparent;
            border-top: none;
            border-bottom: none;
            border-left: none;
        }
        .quick-action-btn:last-child { border-right: none; }
        .quick-action-btn:hover {
            background: var(--cyan-dim);
        }
        .quick-action-btn:active {
            transform: scale(0.98);
        }
        .quick-action-btn.loading {
            opacity: 0.5;
            pointer-events: none;
        }
        .quick-action-btn.success {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--green);
        }
        .quick-action-icon { font-size: 1.5rem; margin-bottom: 8px; }
        .quick-action-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            letter-spacing: 1px;
            color: var(--text);
        }
        .quick-action-desc {
            font-size: 0.65rem;
            color: var(--muted);
            margin-top: 4px;
        }
        
        /* Widget Grid (TIBBIR + Marketplace) */
        .widget-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            border-bottom: 1px solid var(--border);
        }
        .widget-card {
            padding: 25px;
            border-right: 1px solid var(--border);
        }
        .widget-card:last-child { border-right: none; }
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .widget-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--cyan);
            letter-spacing: 2px;
        }
        .widget-link {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--muted);
            text-decoration: none;
            transition: color 0.2s;
        }
        .widget-link:hover { color: var(--cyan); }
        
        /* TIBBIR Widget */
        .tibbir-widget {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(255, 107, 0, 0.05));
            border: 1px solid rgba(251, 191, 36, 0.3);
        }
        .tibbir-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        .tibbir-logo {
            font-size: 2.5rem;
        }
        .tibbir-info h3 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            color: var(--yellow);
            letter-spacing: 2px;
        }
        .tibbir-info span {
            font-size: 0.75rem;
            color: var(--muted);
        }
        .tibbir-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .tibbir-stat {
            text-align: center;
            padding: 12px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
        }
        .tibbir-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--yellow);
        }
        .tibbir-stat-value.positive { color: var(--green); }
        .tibbir-stat-value.negative { color: var(--red); }
        .tibbir-stat-label {
            font-size: 0.65rem;
            color: var(--muted);
            text-transform: uppercase;
            margin-top: 4px;
        }
        .tibbir-btn {
            display: block;
            width: 100%;
            background: linear-gradient(90deg, var(--yellow), var(--orange));
            border: none;
            color: #000;
            padding: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            letter-spacing: 2px;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .tibbir-btn:hover { opacity: 0.9; transform: translateY(-1px); }
        
        /* Marketplace Widget */
        .marketplace-widget {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(77, 87, 160, 0.05));
            border: 1px solid rgba(168, 85, 247, 0.3);
        }
        .marketplace-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .marketplace-stat {
            text-align: center;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
        }
        .marketplace-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--purple);
        }
        .marketplace-stat-label {
            font-size: 0.65rem;
            color: var(--muted);
            text-transform: uppercase;
            margin-top: 4px;
        }
        .marketplace-collections {
            margin-bottom: 15px;
        }
        .collection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        .collection-item:last-child { border-bottom: none; }
        .collection-name {
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .collection-floor {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--green);
        }
        .marketplace-btn {
            display: block;
            width: 100%;
            background: var(--purple);
            border: none;
            color: #fff;
            padding: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            letter-spacing: 2px;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .marketplace-btn:hover { opacity: 0.9; transform: translateY(-1px); }
        
        /* Portfolio Tracker */
        .portfolio-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            transition: all 0.2s;
        }
        .portfolio-card:hover {
            border-color: var(--cyan-border);
            background: var(--cyan-dim);
            transform: translateY(-2px);
        }
        .portfolio-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .portfolio-collection-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text);
        }
        .portfolio-supply {
            font-size: 0.65rem;
            color: var(--muted);
            margin-top: 2px;
        }
        .portfolio-floor {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--cyan);
            margin: 6px 0;
        }
        .portfolio-usd {
            font-size: 0.75rem;
            color: var(--green);
        }
        .portfolio-change {
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
        }
        .portfolio-change.positive {
            color: var(--green);
            background: rgba(0, 255, 136, 0.1);
        }
        .portfolio-change.negative {
            color: var(--red);
            background: rgba(255, 68, 68, 0.1);
        }
        .portfolio-loading {
            text-align: center;
            padding: 20px;
            color: var(--muted);
            font-size: 0.85rem;
        }
        
        /* Team Panel */
        .team-panel {
            border-top: 1px solid var(--border);
            padding: 30px 40px;
            background: rgba(0,0,0,0.3);
        }
        .team-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .team-panel-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--cyan);
            letter-spacing: 2px;
        }
        .team-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        .team-member {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.2s;
        }
        .team-member:hover {
            border-color: var(--cyan-border);
            background: var(--cyan-dim);
        }
        .team-member.working {
            border-color: var(--green);
            box-shadow: 0 0 15px rgba(0,255,136,0.2);
            animation: cardPulse 2s ease-in-out infinite;
        }
        @keyframes cardPulse {
            0%, 100% { box-shadow: 0 0 15px rgba(0,255,136,0.2); }
            50% { box-shadow: 0 0 25px rgba(0,255,136,0.4); }
        }
        .team-member.working .member-status {
            color: var(--green);
            animation: statusPulse 1.5s ease-in-out infinite;
        }
        @keyframes statusPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .team-member.working .member-emoji {
            animation: emojiPulse 2s ease-in-out infinite;
        }
        @keyframes emojiPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .member-emoji {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        .member-pfp {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin-bottom: 8px;
            border: 2px solid var(--border);
            transition: all 0.3s;
        }
        .team-member.working .member-pfp {
            border-color: var(--green);
            box-shadow: 0 0 12px rgba(34, 197, 94, 0.5);
        }
        .member-name {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }
        .member-role {
            font-size: 0.75rem;
            color: var(--muted);
            margin-bottom: 8px;
        }
        .member-model {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: var(--cyan);
            background: var(--cyan-dim);
            padding: 2px 8px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 8px;
        }
        .member-status {
            font-size: 0.7rem;
            color: var(--muted);
            transition: all 0.3s ease;
        }
        .member-status.idle {
            animation: idleBreathe 4s ease-in-out infinite;
        }
        @keyframes idleBreathe {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 0.9; }
        }
        .member-task {
            font-size: 0.7rem;
            color: var(--text);
            margin-top: 5px;
            font-style: italic;
            min-height: 1.2em;
        }
        .member-actions {
            display: flex;
            gap: 6px;
            margin-top: 8px;
            justify-content: center;
        }
        .action-btn {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 6px 10px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .action-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            transform: scale(1.1);
        }
        .action-btn:active {
            transform: scale(0.95);
        }
        .action-btn.loading {
            opacity: 0.5;
            pointer-events: none;
        }
        .command-bar {
            display: flex;
            gap: 8px;
            margin-top: 15px;
            padding: 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        .command-select {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            cursor: pointer;
        }
        .command-input {
            flex: 1;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }
        .command-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        .command-input::placeholder {
            color: var(--muted);
        }
        .command-send {
            background: var(--primary);
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            color: var(--bg);
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .command-send:hover {
            opacity: 0.9;
            transform: scale(1.05);
        }
        .command-send:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .activity-log {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        .activity-log-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--muted);
            margin-bottom: 10px;
            letter-spacing: 1px;
        }
        .activity-item {
            display: flex;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.8rem;
        }
        .activity-item:last-child {
            border-bottom: none;
        }
        .activity-time {
            font-family: 'JetBrains Mono', monospace;
            color: var(--muted);
            min-width: 50px;
        }
        .activity-agent {
            min-width: 25px;
        }
        .activity-text {
            color: var(--text);
        }
        @media (max-width: 900px) {
            .team-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 600px) {
            .team-grid { grid-template-columns: 1fr; }
            .team-panel { padding: 20px; }
        }
        
        /* Agent Status */
        /* Ticker Bar */
        .ticker-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
            padding: 8px 20px;
            background: linear-gradient(90deg, rgba(0, 217, 255, 0.05), rgba(168, 85, 247, 0.05));
            border-bottom: 1px solid var(--border);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            overflow-x: auto;
            max-width: 100%;
            -webkit-overflow-scrolling: touch;
        }
        .ticker-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .ticker-label {
            color: var(--muted);
            font-weight: 600;
        }
        .ticker-value {
            color: var(--text);
            font-weight: 500;
        }
        .ticker-change {
            font-size: 0.65rem;
            padding: 2px 5px;
            border-radius: 3px;
        }
        .ticker-change.positive {
            color: var(--green);
            background: rgba(0, 255, 136, 0.1);
        }
        .ticker-change.negative {
            color: var(--red);
            background: rgba(255, 68, 68, 0.1);
        }
        .ticker-divider {
            color: var(--border);
        }
        .ticker-extra {
            color: var(--cyan);
            font-size: 0.65rem;
        }
        
        .agent-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            border-bottom: 1px solid var(--border);
            background: rgba(77, 87, 160, 0.05);
        }
        .agent-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .status-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--green);
        }
        .agent-info {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--muted);
        }
        
        /* Footer */
        .footer {
            padding: 20px 40px;
            text-align: center;
            color: var(--muted);
            font-size: 0.75rem;
        }
        .footer a { color: var(--cyan); text-decoration: none; }
        
        /* Calendar 3-day view */
        .calendar-3day {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .calendar-day {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
        }
        .calendar-day.today {
            border-color: var(--cyan);
            background: var(--cyan-dim);
        }
        .calendar-day-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--cyan);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        .calendar-day-name { font-weight: 600; }
        .calendar-day-date { color: var(--muted); }
        .calendar-event {
            padding: 8px;
            margin-bottom: 6px;
            background: rgba(0,0,0,0.3);
            border-radius: 4px;
            font-size: 0.8rem;
        }
        .calendar-event:last-child { margin-bottom: 0; }
        .calendar-event-time {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--orange);
            margin-bottom: 2px;
        }
        .calendar-event-title { color: var(--text); }
        .calendar-event.has-context {
            border-left: 3px solid var(--green);
        }
        .context-badge {
            font-size: 0.6rem;
            background: var(--green);
            color: #000;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 6px;
        }
        .no-events {
            color: var(--muted);
            font-size: 0.8rem;
            font-style: italic;
        }
        
        /* Mobile */
        @media (max-width: 1024px) {
            .hero { flex-direction: column; text-align: center; gap: 30px; }
            .nav-time { display: none; }
            .hero .nuria-widget { margin: 20px auto 0; }
            .stats-row { grid-template-columns: repeat(3, 1fr); }
            .stat-box { border-bottom: 1px solid var(--border); }
            .agenda-section { grid-template-columns: 1fr; }
            .agenda-col { border-right: none; border-bottom: 1px solid var(--border); }
            .main-grid { grid-template-columns: 1fr; }
            .main-section { border-right: none; border-bottom: 1px solid var(--border); }
            .projects-grid { grid-template-columns: repeat(2, 1fr); }
            .project-card { border-bottom: 1px solid var(--border); }
            .quick-section { grid-template-columns: repeat(3, 1fr); }
            .quick-link { border-bottom: 1px solid var(--border); }
            .quick-actions-section { grid-template-columns: repeat(2, 1fr); }
            .quick-action-btn { border-bottom: 1px solid var(--border); }
            .widget-grid { grid-template-columns: 1fr; }
            .widget-card { border-right: none; border-bottom: 1px solid var(--border); }
            .crm-stats { grid-template-columns: repeat(2, 1fr); }
            .calendar-3day { grid-template-columns: 1fr; }
        }
        @media (max-width: 600px) {
            .nav { padding: 15px 20px; }
            .nav-links { gap: 15px; }
            .hero { padding: 30px 20px; }
            .hero-title { font-size: 2rem; letter-spacing: 4px; }
            .stats-row { grid-template-columns: repeat(2, 1fr); }
            .agenda-section { grid-template-columns: 1fr; }
            .email-item { grid-template-columns: 80px 1fr 45px; }
            .team-grid { grid-template-columns: 1fr; }
            .projects-grid { grid-template-columns: 1fr; }
            .quick-section { grid-template-columns: repeat(2, 1fr); }
        }
        
        /* Samsung S24 Ultra & Premium Mobile Optimization */
        @media (max-width: 480px) {
            /* Prevent horizontal overflow */
            * { max-width: 100%; }
            
            /* Better touch targets */
            .nav { padding: 12px 16px; position: sticky; top: 0; backdrop-filter: blur(10px); flex-wrap: wrap; gap: 8px; }
            .nav-brand { font-size: 0.7rem; letter-spacing: 0; }
            .nav-links { gap: 12px; overflow-x: auto; -webkit-overflow-scrolling: touch; }
            .nav-links a { font-size: 0.75rem; padding: 8px 4px; white-space: nowrap; }
            
            /* Compact hero */
            .hero { padding: 20px 16px; }
            .hero-title { font-size: 1.8rem; letter-spacing: 3px; }
            .hero-sub { font-size: 0.7rem; }
            .hero-quote { font-size: 0.8rem; }
            .nuria-widget { transform: scale(0.85); }
            
            /* Ticker */
            .ticker-bar { padding: 8px 12px; gap: 10px; font-size: 0.7rem; justify-content: flex-start; }
            .ticker-item { gap: 6px; }
            .ticker-value { font-size: 0.8rem; }
            
            /* Agent bar */
            .agent-bar { padding: 10px 16px; flex-wrap: wrap; gap: 8px; }
            
            /* Stats */
            .stats-row { gap: 0; }
            .stat-box { padding: 12px 8px; }
            .stat-value { font-size: 1.3rem; }
            .stat-label { font-size: 0.65rem; }
            
            /* Sections */
            .main-section { padding: 16px; }
            .section-title { font-size: 0.75rem; }
            
            /* Tasks */
            .task-item { padding: 12px; }
            .task-title { font-size: 0.85rem; }
            .task-meta { font-size: 0.7rem; }
            
            /* Team */
            .team-card { padding: 12px; }
            .team-avatar { width: 36px; height: 36px; font-size: 0.8rem; }
            .team-name { font-size: 0.85rem; }
            .team-role { font-size: 0.7rem; }
            
            /* Projects */
            .project-card { padding: 16px 12px; }
            .project-icon { font-size: 1.5rem; }
            .project-name { font-size: 0.7rem; }
            .project-tasks { font-size: 1.3rem; }
            
            /* Quick actions - bigger touch targets */
            .quick-actions-section { grid-template-columns: 1fr 1fr; gap: 8px; padding: 16px; }
            .quick-action-btn { padding: 14px 10px; min-height: 60px; }
            .quick-action-icon { font-size: 1.3rem; }
            .quick-action-label { font-size: 0.7rem; }
            
            /* Invoice widget */
            .invoice-summary { grid-template-columns: repeat(3, 1fr); gap: 8px; }
            .invoice-stat { padding: 10px 8px; }
            .invoice-stat-value { font-size: 1.1rem; }
            .invoice-item { padding: 10px 12px; }
            .invoice-project { font-size: 0.7rem; }
            .invoice-desc { font-size: 0.75rem; }
            .invoice-value { font-size: 0.9rem; }
            
            /* Calendar */
            .calendar-day { padding: 12px; }
            .calendar-day-name { font-size: 0.7rem; }
            .calendar-day-date { font-size: 1.1rem; }
            .calendar-event { padding: 8px 10px; font-size: 0.75rem; }
            
            /* General spacing */
            .widget-card { padding: 16px; }
            .widget-title { font-size: 0.75rem; }
            
            /* Bottom safe area for gesture navigation */
            body { padding-bottom: env(safe-area-inset-bottom, 20px); }
        }
        
        /* Extra small phones */
        @media (max-width: 360px) {
            .nav-brand { display: none; }
            .hero-title { font-size: 1.5rem; }
            .quick-actions-section { grid-template-columns: 1fr; }
        }
        /* Login Overlay */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .login-overlay.hidden {
            display: none;
        }
        .login-box {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 50px;
            text-align: center;
            max-width: 400px;
        }
        .login-logo {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 4px;
            margin-bottom: 10px;
        }
        .login-subtitle {
            color: var(--cyan);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            letter-spacing: 2px;
            margin-bottom: 30px;
        }
        .login-text {
            color: var(--muted);
            margin-bottom: 30px;
            font-size: 0.9rem;
        }
        .google-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: white;
            color: #333;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .google-btn:hover {
            box-shadow: 0 4px 15px rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        .google-btn img {
            width: 20px;
            height: 20px;
        }
        .login-error {
            color: var(--red);
            margin-top: 20px;
            font-size: 0.85rem;
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .user-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
        }
        .user-name {
            font-size: 0.8rem;
            color: var(--text);
        }
        .logout-btn {
            background: none;
            border: 1px solid var(--border);
            color: var(--muted);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.7rem;
            cursor: pointer;
            margin-left: 10px;
        }
        .logout-btn:hover {
            border-color: var(--red);
            color: var(--red);
        }
        
        /* Toast Notifications */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .toast {
            background: var(--card);
            border: 1px solid var(--green);
            border-radius: 8px;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: toastSlide 3s ease forwards;
            max-width: 350px;
            opacity: 1;
        }
        @keyframes toastSlide {
            0% { transform: translateX(400px); opacity: 0; }
            10% { transform: translateX(0); opacity: 1; }
            90% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(400px); opacity: 0; }
        }
        .toast-icon { font-size: 1.2rem; }
        .toast-content { flex: 1; }
        .toast-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--green);
        }
        .toast-message {
            font-size: 0.75rem;
            color: var(--muted);
            margin-top: 2px;
        }
        .toast.error {
            border-color: var(--red);
        }
        .toast.error .toast-title {
            color: var(--red);
        }
        
        /*  Invoice Tracker Widget */
        .invoice-widget {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.08), rgba(0, 122, 204, 0.05));
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        .invoice-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .invoice-stat {
            text-align: center;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
        }
        .invoice-stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--green);
        }
        .invoice-stat-value.warning { color: var(--yellow); }
        .invoice-stat-value.danger { color: var(--red); }
        .invoice-stat-label {
            font-size: 0.65rem;
            color: var(--muted);
            text-transform: uppercase;
            margin-top: 4px;
        }
        .invoice-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .invoice-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            border-left: 3px solid var(--muted);
            transition: all 0.2s;
        }
        .invoice-item:hover {
            background: rgba(0,0,0,0.3);
        }
        .invoice-item.pending { border-left-color: var(--yellow); }
        .invoice-item.paid { border-left-color: var(--green); }
        .invoice-item.overdue { border-left-color: var(--red); }
        .invoice-item.draft { border-left-color: var(--muted); }
        .invoice-info {
            flex: 1;
        }
        .invoice-project {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--cyan);
            letter-spacing: 1px;
        }
        .invoice-desc {
            font-size: 0.8rem;
            color: var(--text);
            margin-top: 2px;
        }
        .invoice-meta {
            font-size: 0.7rem;
            color: var(--muted);
            margin-top: 4px;
        }
        .invoice-amount {
            text-align: right;
        }
        .invoice-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            font-weight: 600;
            color: var(--green);
        }
        .invoice-status {
            font-size: 0.65rem;
            padding: 3px 8px;
            border-radius: 4px;
            margin-top: 4px;
            display: inline-block;
        }
        .invoice-status.pending { background: rgba(220, 220, 170, 0.2); color: var(--yellow); }
        .invoice-status.paid { background: rgba(0, 255, 136, 0.2); color: var(--green); }
        .invoice-status.overdue { background: rgba(241, 76, 76, 0.2); color: var(--red); }
        .invoice-status.draft { background: rgba(128, 128, 128, 0.2); color: var(--muted); }
        
        /*  Activity Widget */
        .activity-widget {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.08), rgba(0, 122, 204, 0.05));
            border: 1px solid rgba(168, 85, 247, 0.3);
        }
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
        }
        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 10px 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 6px;
            border-left: 3px solid var(--purple);
        }
        .activity-hash {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--purple);
            background: rgba(168, 85, 247, 0.15);
            padding: 2px 6px;
            border-radius: 4px;
        }
        .activity-info { flex: 1; }
        .activity-message {
            font-size: 0.8rem;
            color: var(--text);
            line-height: 1.4;
        }
        .activity-time {
            font-size: 0.7rem;
            color: var(--muted);
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <!-- Login Overlay -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-box">
            <div class="login-logo">HARTO</div>
            <div class="login-subtitle">COMMAND CENTER</div>
            <p class="login-text">Acceso restringido. Inicia sesin con tu cuenta autorizada.</p>
            <div id="googleSignInBtn"></div>
            <p class="login-error" id="loginError" style="display:none;"></p>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-brand">HARTO // COMMAND CENTER</div>
        <div class="nav-links">
            <a href="index.html" class="active">Dashboard</a>
            <a href="tasks.html">Tasks</a>
            <a href="trading.html">Trading</a>
            <a href="tracking.html">Tracking</a>
            <a href="team.html">Team</a>
            <a href="crm.html">CRM</a>
        </div>
        <div class="nav-time">
            <span class="nav-day" id="heroDay">-</span>
            <span class="nav-date" id="heroDate">-</span>
            <span class="nav-clock" id="heroClock">-</span>
        </div>
    </nav>
    
    <div class="agent-bar">
        <div class="agent-status">
            <div class="status-dot"></div>
            <div class="status-text">NURIA  ONLINE</div>
        </div>
        <div class="agent-info">
            Data updated: <span id="dataUpdated">-</span>  
            <span class="user-info" id="userInfo" style="display:none;">
                <img class="user-avatar" id="userAvatar" src="" alt="">
                <span class="user-name" id="userName"></span>
                <button class="logout-btn" onclick="logout()">Salir</button>
            </span>
        </div>
    </div>
    
    <!-- Live Ticker Bar -->
    <div class="ticker-bar" id="tickerBar">
        <div class="ticker-item">
            <span class="ticker-label">BTC</span>
            <span class="ticker-value" id="tickerBtc">$104,200</span>
            <span class="ticker-change positive" id="tickerBtcChange">+2.1%</span>
        </div>
        <div class="ticker-divider">|</div>
        <div class="ticker-item">
            <span class="ticker-label">ETH</span>
            <span class="ticker-value" id="tickerEth">$3,180</span>
            <span class="ticker-change positive" id="tickerEthChange">+1.8%</span>
        </div>
        <div class="ticker-divider">|</div>
        <div class="ticker-item">
            <span class="ticker-label"></span>
            <span class="ticker-value" id="tickerBlock">Block #</span>
            <span class="ticker-extra" id="tickerFee">~1 sat/vB</span>
        </div>
    </div>
    
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">HARTO</h1>
            <div class="hero-sub">ARTIST COMMAND CENTER</div>
            <p class="hero-quote" id="heroQuote">"La creatividad es la inteligencia divirtindose."  Einstein</p>
        </div>
        
        <!-- NURIA Avatar - Far Right -->
        <div class="nuria-widget">
            <div class="nuria-name">NURIA</div>
            <div class="nuria-face">
                <div class="nuria-eyes">
                    <div class="nuria-eye" id="nuriaEyeL"></div>
                    <div class="nuria-eye" id="nuriaEyeR"></div>
                </div>
                <div class="nuria-blush nuria-blush-l"></div>
                <div class="nuria-blush nuria-blush-r"></div>
                <div class="nuria-mouth"></div>
            </div>
        </div>
    </section>
    
    <section class="stats-row">
        <div class="stat-box highlight">
            <div class="stat-value" id="statPendingTasks">18</div>
            <div class="stat-label">Pending Tasks</div>
        </div>
        <div class="stat-box">
            <div class="stat-value" id="statTodoTasks">9</div>
            <div class="stat-label">To Do</div>
        </div>
        <div class="stat-box">
            <div class="stat-value" id="statHours">51h</div>
            <div class="stat-label">Est. Hours</div>
        </div>
        <div class="stat-box">
            <div class="stat-value">66.4K</div>
            <div class="stat-label">CRM Contacts</div>
        </div>
        <div class="stat-box">
            <div class="stat-value">9.2K</div>
            <div class="stat-label">High Value</div>
        </div>
        <div class="stat-box success">
            <div class="stat-value" id="statContacted">0</div>
            <div class="stat-label">Contacted</div>
        </div>
    </section>
    
    <!--  QUICK ACTIONS -->
    <section class="quick-actions-section">
        <button class="quick-action-btn" onclick="triggerQuickAction('sync-tasks')" id="qa-sync-tasks">
            <div class="quick-action-icon"></div>
            <div class="quick-action-text">SYNC TASKS</div>
            <div class="quick-action-desc">Update from Sheets</div>
        </button>
        <button class="quick-action-btn" onclick="triggerQuickAction('check-email')" id="qa-check-email">
            <div class="quick-action-icon"></div>
            <div class="quick-action-text">CHECK EMAIL</div>
            <div class="quick-action-desc">Get digest</div>
        </button>
        <button class="quick-action-btn" onclick="triggerQuickAction('twitter-scan')" id="qa-twitter-scan">
            <div class="quick-action-icon"></div>
            <div class="quick-action-text">TWITTER SCAN</div>
            <div class="quick-action-desc">Check mentions</div>
        </button>
        <button class="quick-action-btn" onclick="triggerQuickAction('market-check')" id="qa-market-check">
            <div class="quick-action-icon"></div>
            <div class="quick-action-text">MARKET CHECK</div>
            <div class="quick-action-desc">Ordinals prices</div>
        </button>
    </section>
    
    <!--  CALENDAR 3-DAY VIEW -->
    <section class="agenda-section">
        <div class="agenda-col" style="grid-column: span 2;">
            <div class="section-header">
                <div class="section-title"> PRXIMOS 3 DAS</div>
                <div class="section-date" id="todayDate">-</div>
            </div>
            <div class="calendar-3day" id="calendar3Day">
                <!-- Populated by JS -->
            </div>
        </div>
    </section>
    
    <!--  EMAILS -->
    <section class="agenda-section">
        <div class="agenda-col" style="grid-column: span 2;">
            <div class="section-header">
                <div class="section-title"> RECENT EMAILS</div>
                <div class="email-count"><span id="unreadCount">8</span> unread</div>
            </div>
            <div class="email-list" id="emailList">
                <!-- Populated by JS -->
            </div>
        </div>
    </section>
    
    <!--  INVOICE TRACKER -->
    <section class="widget-grid" style="border-bottom: 1px solid var(--border);">
        <div class="widget-card invoice-widget" style="grid-column: span 2;">
            <div class="widget-header">
                <div class="widget-title"> FACTURAS & COBROS</div>
                <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">
                    Pendiente: <span id="invoiceTotalPending" style="color: var(--yellow); font-weight: 600;">-</span>
                </div>
            </div>
            <div class="invoice-summary">
                <div class="invoice-stat">
                    <div class="invoice-stat-value" id="invoicePendingCount">-</div>
                    <div class="invoice-stat-label">Pendientes</div>
                </div>
                <div class="invoice-stat">
                    <div class="invoice-stat-value warning" id="invoiceDraftCount">-</div>
                    <div class="invoice-stat-label">Borradores</div>
                </div>
                <div class="invoice-stat">
                    <div class="invoice-stat-value danger" id="invoiceOverdueCount">-</div>
                    <div class="invoice-stat-label">Vencidas</div>
                </div>
            </div>
            <div class="invoice-list" id="invoiceList">
                <!-- Populated by JS -->
            </div>
        </div>
    </section>
    
    <!--  RECENT ACTIVITY -->
    <section class="widget-grid" style="border-bottom: 1px solid var(--border);">
        <div class="widget-card activity-widget" style="grid-column: span 2;">
            <div class="widget-header">
                <div class="widget-title"> ACTIVIDAD RECIENTE</div>
                <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: var(--muted);">
                    <span id="activityCount">-</span> commits hoy
                </div>
            </div>
            <div class="activity-list" id="activityList">
                <!-- Populated by JS -->
            </div>
        </div>
    </section>
    
    <section class="projects-grid" id="projectsGrid">
        <!-- Populated by JS -->
    </section>
    
    <section class="main-grid">
        <div class="main-section">
            <div class="section-header">
                <div class="section-title">// PRIORITY TASKS</div>
                <a href="tasks.html" class="section-link">VIEW ALL </a>
            </div>
            <div class="task-list" id="priorityTasks">
                <!-- Populated by JS -->
            </div>
        </div>
        
        <div class="main-section">
            <div class="section-header">
                <div class="section-title">// TEAM</div>
                <a href="tasks.html" class="section-link">MANAGE </a>
            </div>
            <div class="team-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="team-card">
                    <div class="team-avatar">AF</div>
                    <div class="team-info">
                        <div class="team-name">Arturo</div>
                        <div class="team-role">Director</div>
                    </div>
                    <div class="team-tasks">7</div>
                </div>
                <div class="team-card">
                    <div class="team-avatar">JU</div>
                    <div class="team-info">
                        <div class="team-name">Juliette</div>
                        <div class="team-role">Finance</div>
                    </div>
                    <div class="team-tasks">3</div>
                </div>
                <div class="team-card">
                    <div class="team-avatar">SE</div>
                    <div class="team-info">
                        <div class="team-name">Sergio</div>
                        <div class="team-role">Finance</div>
                    </div>
                    <div class="team-tasks">5</div>
                </div>
            </div>
            
            <div class="crm-summary" style="margin-top: 25px;">
                <div class="crm-header">
                    <div class="crm-title"> CRM NETWORK</div>
                </div>
                <div class="crm-stats">
                    <div class="crm-stat">
                        <div class="crm-stat-value">66.4K</div>
                        <div class="crm-stat-label">Contacts</div>
                    </div>
                    <div class="crm-stat">
                        <div class="crm-stat-value">9.2K</div>
                        <div class="crm-stat-label">High Value</div>
                    </div>
                    <div class="crm-stat">
                        <div class="crm-stat-value">4K</div>
                        <div class="crm-stat-label">Ordinals</div>
                    </div>
                    <div class="crm-stat">
                        <div class="crm-stat-value">6.6K</div>
                        <div class="crm-stat-label">Verified</div>
                    </div>
                </div>
                <div class="crm-bar">
                    <div class="crm-bar-segment" style="width: 6%; background: var(--orange);"></div>
                    <div class="crm-bar-segment" style="width: 10%; background: var(--purple);"></div>
                    <div class="crm-bar-segment" style="width: 3%; background: var(--green);"></div>
                    <div class="crm-bar-segment" style="width: 4%; background: var(--yellow);"></div>
                    <div class="crm-bar-segment" style="width: 4%; background: var(--cyan);"></div>
                    <div class="crm-bar-segment" style="width: 73%; background: var(--muted);"></div>
                </div>
                <a href="crm.html" class="crm-btn">OPEN CRM </a>
            </div>
        </div>
    </section>
    
    <section class="quick-section">
        <a href="crm.html" class="quick-link">
            <div class="quick-icon"></div>
            <div class="quick-text">CRM</div>
        </a>
        <a href="tasks.html" class="quick-link">
            <div class="quick-icon"></div>
            <div class="quick-text">TASKS</div>
        </a>
        <a href="analytics.html" class="quick-link">
            <div class="quick-icon"></div>
            <div class="quick-text">ANALYTICS</div>
        </a>
        <a href="mining.html" class="quick-link" style="border-color: rgba(251, 191, 36, 0.3); background: rgba(251, 191, 36, 0.05);">
            <div class="quick-icon"></div>
            <div class="quick-text">MINING</div>
        </a>
        <a href="sat-mining.html" class="quick-link" style="border-color: rgba(245, 158, 11, 0.4); background: rgba(245, 158, 11, 0.08);">
            <div class="quick-icon"></div>
            <div class="quick-text">SAT TOOL</div>
        </a>
        <a href="sats-arbitrage.html" class="quick-link" style="border-color: rgba(34, 197, 94, 0.4); background: rgba(34, 197, 94, 0.08);">
            <div class="quick-icon"></div>
            <div class="quick-text">ARBITRAGE</div>
        </a>
        <a href="https://docs.google.com/spreadsheets/d/1LIdaTvRvKEZOMJbqXcBIrA5Xq6bEnzfiiFkFp_A6pTY" target="_blank" class="quick-link">
            <div class="quick-icon"></div>
            <div class="quick-text">SHEETS</div>
        </a>
        <a href="team.html" class="quick-link" style="border-color: rgba(255, 107, 0, 0.5); background: rgba(255, 107, 0, 0.1);">
            <div class="quick-icon"></div>
            <div class="quick-text">TEAM</div>
        </a>
    </section>
    
    <!--  TEAM NURIA - Enhanced -->
    <section class="team-panel">
        <div class="team-panel-header">
            <div class="team-panel-title"> TEAM NURIA</div>
            <div style="font-size: 0.75rem; color: var(--muted);">
                <span id="teamLiveIndicator" style="color: var(--green);"> LIVE</span>  
                Last update: <span id="lastSync">-</span>
            </div>
        </div>
        
        <div class="team-grid" id="teamGrid">
            <div class="team-member working" id="member-nuria">
                <img src="pfps/nuria.png" alt="Nuria" class="member-pfp">
                <div class="member-name">Nuria</div>
                <div class="member-role">Jefa</div>
                <div class="member-model">Claude Opus</div>
                <div class="member-status"> WORKING</div>
                <div class="member-task" id="task-nuria">Coordinando equipo</div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('nuria', 'check-emails')" title="Check Emails"></button>
                    <button class="action-btn" onclick="triggerTask('nuria', 'status-report')" title="Status Report"></button>
                </div>
            </div>
            <div class="team-member" id="member-amy">
                <img src="pfps/amy.png" alt="Amy" class="member-pfp">
                <div class="member-name">Amy</div>
                <div class="member-role">Administracin</div>
                <div class="member-model">Kimi 2.5</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-amy"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('amy', 'sync-tasks')" title="Sync Tasks"></button>
                    <button class="action-btn" onclick="triggerTask('amy', 'check-sheets')" title="Check Sheets"></button>
                </div>
            </div>
            <div class="team-member" id="member-jack">
                <img src="pfps/jack.png" alt="Jack" class="member-pfp">
                <div class="member-name">Jack</div>
                <div class="member-role">Tcnico</div>
                <div class="member-model">Claude Sonnet</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-jack"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('jack', 'scan-repos')" title="Scan Repos"></button>
                    <button class="action-btn" onclick="triggerTask('jack', 'run-diagnostics')" title="Diagnostics"></button>
                </div>
            </div>
            <div class="team-member" id="member-pepe">
                <img src="pfps/pepe.png" alt="Pepe" class="member-pfp">
                <div class="member-name">Pepe</div>
                <div class="member-role">Ideas Locas</div>
                <div class="member-model">Kimi 2.5</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-pepe"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('pepe', 'twitter-trends')" title="Twitter Trends"></button>
                    <button class="action-btn" onclick="triggerTask('pepe', 'find-viral')" title="Find Viral"></button>
                </div>
            </div>
            <div class="team-member" id="member-sergia">
                <img src="pfps/sergia.png" alt="Sergia" class="member-pfp">
                <div class="member-name">Sergia</div>
                <div class="member-role">Finance</div>
                <div class="member-model">Claude Sonnet</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-sergia"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('sergia', 'check-invoices')" title="Check Invoices"></button>
                    <button class="action-btn" onclick="triggerTask('sergia', 'finance-report')" title="Finance Report"></button>
                </div>
            </div>
            <div class="team-member" id="member-marcus">
                <img src="pfps/marcus.png" alt="Marcus" class="member-pfp" onerror="this.src='pfps/default.png'">
                <div class="member-name">Marcus</div>
                <div class="member-role">HR / Chief of Staff</div>
                <div class="member-model">Claude Opus</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-marcus"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('marcus', 'team-status')" title="Team Status"></button>
                    <button class="action-btn" onclick="triggerTask('marcus', 'metrics')" title="Metrics"></button>
                </div>
            </div>
            <div class="team-member" id="member-luna">
                <img src="pfps/luna.png" alt="Luna" class="member-pfp" onerror="this.src='pfps/default.png'">
                <div class="member-name">Luna</div>
                <div class="member-role">Content Creator</div>
                <div class="member-model">Kimi K2</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-luna"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('luna', 'viral-research')" title="Viral Research"></button>
                    <button class="action-btn" onclick="triggerTask('luna', 'draft-content')" title="Draft Content"></button>
                </div>
            </div>
            <div class="team-member" id="member-victor">
                <img src="pfps/victor.png" alt="Victor" class="member-pfp" onerror="this.src='pfps/default.png'">
                <div class="member-name">Victor</div>
                <div class="member-role">Sales / Collectors</div>
                <div class="member-model">Kimi K2</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-victor"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('victor', 'check-pipeline')" title="Check Pipeline"></button>
                    <button class="action-btn" onclick="triggerTask('victor', 'outreach')" title="Outreach"></button>
                </div>
            </div>
            <div class="team-member" id="member-max">
                <img src="pfps/max.png" alt="Max" class="member-pfp" onerror="this.src='pfps/default.png'">
                <div class="member-name">Max</div>
                <div class="member-role">QA / Testing</div>
                <div class="member-model">Kimi K2</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-max"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('max', 'audit')" title="Run Audit"></button>
                    <button class="action-btn" onclick="triggerTask('max', 'test')" title="Run Tests"></button>
                </div>
            </div>
            <div class="team-member" id="member-lola">
                <img src="pfps/lola.png" alt="Lola" class="member-pfp" onerror="this.src='pfps/default.png'">
                <div class="member-name">Lola</div>
                <div class="member-role">Creative Director</div>
                <div class="member-model">Claude Sonnet</div>
                <div class="member-status"> IDLE</div>
                <div class="member-task" id="task-lola"></div>
                <div class="member-actions">
                    <button class="action-btn" onclick="triggerTask('lola', 'design')" title="Generate Design"></button>
                    <button class="action-btn" onclick="triggerTask('lola', 'brand-check')" title="Brand Check"></button>
                </div>
            </div>
        </div>
        
        <!-- Command Input -->
        <div class="command-bar">
            <select id="commandAgent" class="command-select">
                <option value="nuria"> Nuria</option>
                <option value="marcus"> Marcus</option>
                <option value="amy"> Amy</option>
                <option value="sergia"> Sergia</option>
                <option value="jack"> Jack</option>
                <option value="pepe"> Pepe</option>
                <option value="luna"> Luna</option>
                <option value="victor"> Victor</option>
                <option value="max"> Max</option>
                <option value="lola"> Lola</option>
            </select>
            <input type="text" id="commandInput" class="command-input" placeholder="Escribe un comando..." onkeypress="if(event.key==='Enter')sendCommand()">
            <button class="command-send" onclick="sendCommand()"></button>
        </div>
        
        <div class="activity-log" id="activityLog">
            <div class="activity-log-title"> ACTIVITY LOG <span id="logLiveIndicator" style="font-size: 0.6rem; color: var(--green);"> LIVE</span></div>
            <div class="activity-item">
                <span class="activity-time">12:00</span>
                <span class="activity-agent"></span>
                <span class="activity-text">Jack complet fix del dashboard</span>
            </div>
        </div>
    </section>
    
    <footer class="footer">
        <a href="https://hartostudio.org">hartostudio.org</a>  Powered by <a href="#">Nuria </a>
    </footer>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>
    
    <script>
        // ===================
        // TOAST NOTIFICATIONS
        // ===================
        function showToast(title, message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div class="toast-icon">${type === 'success' ? '' : ''}</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
            `;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
        
        // ===================
        // AUTHENTICATION
        // ===================
        const GOOGLE_CLIENT_ID = '324032999377-gtrvtkbln1qlujfcmlo5pim0qo98m1ca.apps.googleusercontent.com';
        const ALLOWED_EMAILS = [
            'hartostudio@gmail.com',
            'arturo@hartostudio.org',
            'harto@hartostudio.org',
            'finance@hartostudio.com'
        ];
        
        let currentUser = null;
        
        function checkAuth() {
            const savedUser = localStorage.getItem('dashboardUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    if (currentUser.email && ALLOWED_EMAILS.includes(currentUser.email)) {
                        showDashboard();
                        return true;
                    }
                } catch (e) {}
            }
            showLogin();
            return false;
        }
        
        function showLogin() {
            document.getElementById('loginOverlay').classList.remove('hidden');
        }
        
        function showDashboard() {
            document.getElementById('loginOverlay').classList.add('hidden');
            if (currentUser) {
                document.getElementById('userInfo').style.display = 'flex';
                document.getElementById('userName').textContent = currentUser.name || currentUser.email;
                if (currentUser.picture) {
                    document.getElementById('userAvatar').src = currentUser.picture;
                }
            }
        }
        
        function handleCredentialResponse(response) {
            const payload = parseJwt(response.credential);
            
            if (ALLOWED_EMAILS.includes(payload.email)) {
                currentUser = {
                    email: payload.email,
                    name: payload.name,
                    picture: payload.picture
                };
                localStorage.setItem('dashboardUser', JSON.stringify(currentUser));
                document.getElementById('loginError').style.display = 'none';
                showDashboard();
            } else {
                document.getElementById('loginError').textContent = ' Email no autorizado: ' + payload.email;
                document.getElementById('loginError').style.display = 'block';
            }
        }
        
        function parseJwt(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            return JSON.parse(decodeURIComponent(atob(base64).split('').map(c => 
                '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)
            ).join('')));
        }
        
        function logout() {
            localStorage.removeItem('dashboardUser');
            currentUser = null;
            location.reload();
        }
        
        // Initialize Google Sign-In AND Dashboard Data
        window.onload = function() {
            console.log(' Page loaded, initializing...');
            
            // Google Sign-In
            if (!checkAuth()) {
                google.accounts.id.initialize({
                    client_id: GOOGLE_CLIENT_ID,
                    callback: handleCredentialResponse
                });
                google.accounts.id.renderButton(
                    document.getElementById('googleSignInBtn'),
                    { theme: 'filled_black', size: 'large', text: 'signin_with', shape: 'rectangular' }
                );
            }
            
            // Load dashboard data
            if (typeof loadDashboardData === 'function') {
                loadDashboardData();
                setInterval(loadDashboardData, 5 * 60 * 1000);
            }
            
            // Load Ticker data (BTC, ETH)
            loadTickerData();
            setInterval(loadTickerData, 60000);
            
            // Load Invoice data
            loadInvoiceData();
            setInterval(loadInvoiceData, 60000);
            
            // Load Activity data
            loadActivityData();
            setInterval(loadActivityData, 120000);
            
            // Load Projects data
            loadProjectsData();
            setInterval(loadProjectsData, 300000);
        };
        
        // ===================
        // DASHBOARD
        // ===================
        
        // Quotes
        const quotes = [
            { text: "La creatividad es la inteligencia divirtindose.", author: "Einstein" },
            { text: "Every artist was first an amateur.", author: "Emerson" },
            { text: "Art is not what you see, but what you make others see.", author: "Degas" },
            { text: "The chief enemy of creativity is good sense.", author: "Picasso" },
            { text: "Have no fear of perfection - you'll never reach it.", author: "Dal" },
            { text: "Price is what you pay. Value is what you get.", author: "Buffett" },
            { text: "Stay hungry, stay foolish.", author: "Jobs" },
            { text: "Art washes away from the soul the dust of everyday life.", author: "Picasso" },
            { text: "The purpose of art is washing the dust of daily life off our souls.", author: "Picasso" }
        ];
        
        // Time & Date
        function updateTime() {
            const now = new Date();
            const days = ['SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY'];
            const months = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'];
            
            document.getElementById('heroDay').textContent = days[now.getDay()];
            document.getElementById('heroDate').textContent = `${now.getDate()} ${months[now.getMonth()]} ${now.getFullYear()}`;
            document.getElementById('heroClock').textContent = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('lastSync').textContent = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
        }
        
        // Random quote
        function setQuote() {
            const quote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('heroQuote').textContent = `"${quote.text}"  ${quote.author}`;
        }
        
        // Pipeline stats from localStorage
        function updatePipelineStats() {
            const statuses = JSON.parse(localStorage.getItem('crm_statuses') || '{}');
            const contacted = Object.values(statuses).filter(s => s !== 'prospect').length;
            document.getElementById('statContacted').textContent = contacted;
        }
        
        updateTime();
        setQuote();
        updatePipelineStats();
        setInterval(updateTime, 1000);
        
        // Update today's schedule date
        function updateScheduleDate() {
            const today = new Date();
            const dateStr = today.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
            document.getElementById('todayDate').textContent = dateStr;
        }
        updateScheduleDate();
        
        // NURIA animation system
        const nuriaEyeL = document.getElementById('nuriaEyeL');
        const nuriaEyeR = document.getElementById('nuriaEyeR');
        const nuriaWidget = document.querySelector('.nuria-widget');
        let nuriaIsWorking = false;
        let blinkTimeout = null;
        
        function nuriaBlink() {
            if (!nuriaIsWorking) return;
            nuriaEyeL.classList.add('blink');
            nuriaEyeR.classList.add('blink');
            setTimeout(() => {
                nuriaEyeL.classList.remove('blink');
                nuriaEyeR.classList.remove('blink');
            }, 150);
        }
        
        function scheduleNuriaBlink() {
            if (!nuriaIsWorking) return;
            const delay = 2000 + Math.random() * 3000;
            blinkTimeout = setTimeout(() => {
                nuriaBlink();
                scheduleNuriaBlink();
            }, delay);
        }
        
        function setNuriaWorking(working) {
            nuriaIsWorking = working;
            if (working) {
                nuriaWidget.classList.remove('idle');
                nuriaWidget.classList.add('working');
                nuriaEyeL.classList.remove('sleeping');
                nuriaEyeR.classList.remove('sleeping');
                scheduleNuriaBlink();
            } else {
                nuriaWidget.classList.remove('working');
                nuriaWidget.classList.add('idle');
                nuriaEyeL.classList.add('sleeping');
                nuriaEyeR.classList.add('sleeping');
                if (blinkTimeout) clearTimeout(blinkTimeout);
            }
        }
        
        // Real-time team status via Upstash Redis
        const UPSTASH_URL = 'https://pumped-shad-30856.upstash.io';
        const UPSTASH_TOKEN = 'AXiIAAIncDI1Yzk1YTUyMjZiMjE0MWIwYmYyZDk2ZDIxYWU3MDFjOXAyMzA4NTY';
        const agentEmojis = { 
            nuria: '', 
            marcus: '', 
            amy: '', 
            sergia: '', 
            jack: '', 
            pepe: '', 
            luna: '', 
            victor: '', 
            max: '' 
        };
        
        async function checkNuriaStatus() {
            try {
                const res = await fetch(`${UPSTASH_URL}/get/nuria-status`, {
                    headers: { 'Authorization': `Bearer ${UPSTASH_TOKEN}` }
                });
                if (res.ok) {
                    const result = await res.json();
                    const data = JSON.parse(result.result || '{}');
                    const lastActive = new Date(data.lastActive).getTime();
                    const now = Date.now();
                    const idleMinutes = (now - lastActive) / 60000;
                    setNuriaWorking(idleMinutes < 2);
                } else {
                    setNuriaWorking(false);
                }
            } catch (e) {
                setNuriaWorking(false);
            }
        }
        
        // Fetch full team status from Upstash (real-time)
        async function fetchTeamStatusRealtime() {
            try {
                const res = await fetch(`${UPSTASH_URL}/get/team-status`, {
                    headers: { 'Authorization': `Bearer ${UPSTASH_TOKEN}` }
                });
                if (res.ok) {
                    const result = await res.json();
                    if (result.result) {
                        const data = JSON.parse(result.result);
                        renderTeamStatusRealtime(data);
                    }
                }
            } catch (e) {
                console.error('Failed to fetch team status:', e);
            }
        }
        
        function renderTeamStatusRealtime(data) {
            const now = Date.now();
            
            for (const [id, agent] of Object.entries(data.agents || {})) {
                const card = document.getElementById(`member-${id}`);
                if (!card) continue;
                
                const lastActive = agent.lastActive ? new Date(agent.lastActive).getTime() : 0;
                const idleMinutes = (now - lastActive) / 60000;
                const isWorking = idleMinutes < 2;
                
                card.classList.toggle('working', isWorking);
                
                const statusEl = card.querySelector('.member-status');
                if (statusEl) {
                    statusEl.textContent = isWorking ? ' WORKING' : ' IDLE';
                    statusEl.style.color = isWorking ? 'var(--green)' : 'var(--muted)';
                }
                
                const taskEl = document.getElementById(`task-${id}`);
                if (taskEl) {
                    taskEl.textContent = isWorking ? (agent.task || 'Processing...') : '';
                }
            }
            
            // Update activity log
            const logContainer = document.getElementById('activityLog');
            if (logContainer && data.activityLog && data.activityLog.length > 0) {
                const logHtml = data.activityLog.slice(0, 10).map(item => `
                    <div class="activity-item">
                        <span class="activity-time">${item.time}</span>
                        <span class="activity-agent">${agentEmojis[item.agent] || ''}</span>
                        <span class="activity-text">${item.action}</span>
                    </div>
                `).join('');
                
                logContainer.innerHTML = `
                    <div class="activity-log-title"> ACTIVITY LOG <span id="logLiveIndicator" style="font-size: 0.6rem; color: var(--green);"> LIVE</span></div>
                    ${logHtml}
                `;
            }
        }
        
        // Task labels for preset buttons
        const TASK_LABELS = {
            nuria: { 'check-emails': 'Check Emails', 'status-report': 'Status Report' },
            jack: { 'scan-repos': 'Scan Repos', 'run-diagnostics': 'Run Diagnostics' },
            pepe: { 'twitter-trends': 'Twitter Trends', 'find-viral': 'Find Viral' },
            amy: { 'sync-tasks': 'Sync Tasks', 'check-sheets': 'Check Sheets' },
            sergia: { 'check-invoices': 'Check Invoices', 'finance-report': 'Finance Report' }
        };
        const TASK_PROMPTS = {
            nuria: { 'check-emails': 'Check unread emails and summarize anything important.', 'status-report': 'Give a quick status report: pending tasks, recent activity.' },
            jack: { 'scan-repos': 'Check git status on all repos. Report uncommitted changes.', 'run-diagnostics': 'Run system diagnostics: disk space, processes, errors.' },
            pepe: { 'twitter-trends': 'Scan Twitter for Ordinals, NFT, AI trends.', 'find-viral': 'Search Twitter for viral content >1000 likes in Ordinals/NFT/AI.' },
            amy: { 'sync-tasks': 'Sync tasks from Google Sheets to dashboard/TASKS.md.', 'check-sheets': 'Check Exquisite project spreadsheet for updates.' },
            sergia: { 'check-invoices': 'Check pending invoices and payment status.', 'finance-report': 'Generate financial summary: income, expenses, pending payments.' }
        };

        // Queue task directly to Upstash Redis
        async function queueTask(agent, taskId, customPrompt) {
            const label = customPrompt ? 'Custom Command' : (TASK_LABELS[agent]?.[taskId] || taskId);
            const prompt = customPrompt || (TASK_PROMPTS[agent]?.[taskId] || taskId);
            
            const queueItem = JSON.stringify({
                agent: agent,
                taskId: taskId,
                label: label,
                prompt: prompt,
                status: 'pending',
                createdAt: new Date().toISOString()
            });
            
            await fetch(`${UPSTASH_URL}/lpush/agent-task-queue/${encodeURIComponent(queueItem)}`, {
                headers: { 'Authorization': `Bearer ${UPSTASH_TOKEN}` }
            });
            
            // Update activity log
            const statusRes = await fetch(`${UPSTASH_URL}/get/team-status`, {
                headers: { 'Authorization': `Bearer ${UPSTASH_TOKEN}` }
            });
            if (statusRes.ok) {
                const result = await statusRes.json();
                const status = result.result ? JSON.parse(result.result) : { agents: {}, activityLog: [] };
                const time = new Date().toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                const actionText = customPrompt 
                    ? ` "${prompt.substring(0, 30)}${prompt.length > 30 ? '...' : ''}"` 
                    : ` ${label}`;
                status.activityLog = [
                    { time: time, agent: agent, action: actionText },
                    ...(status.activityLog || []).slice(0, 9)
                ];
                status.updated = new Date().toISOString();
                await fetch(`${UPSTASH_URL}/set/team-status`, {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${UPSTASH_TOKEN}` },
                    body: JSON.stringify(status)
                });
            }
        }
        
        // Trigger preset task
        async function triggerTask(agent, taskId) {
            const btn = event.target;
            btn.classList.add('loading');
            try {
                await queueTask(agent, taskId, null);
                btn.style.background = 'var(--green)';
                fetchTeamStatusRealtime();
                setTimeout(() => { btn.style.background = ''; btn.classList.remove('loading'); }, 1000);
            } catch (e) {
                console.error('Trigger failed:', e);
                btn.style.background = 'var(--red)';
                setTimeout(() => { btn.style.background = ''; btn.classList.remove('loading'); }, 1000);
            }
        }
        
        // Send custom command
        async function sendCommand() {
            const agent = document.getElementById('commandAgent').value;
            const input = document.getElementById('commandInput');
            const btn = document.querySelector('.command-send');
            const command = input.value.trim();
            if (!command) return;
            
            btn.disabled = true;
            btn.textContent = '...';
            try {
                await queueTask(agent, 'custom', command);
                input.value = '';
                btn.textContent = '';
                btn.style.background = 'var(--green)';
                fetchTeamStatusRealtime();
                setTimeout(() => { btn.textContent = ''; btn.style.background = ''; }, 1500);
            } catch (e) {
                console.error('Command failed:', e);
                btn.textContent = '';
                btn.style.background = 'var(--red)';
                setTimeout(() => { btn.textContent = ''; btn.style.background = ''; }, 1500);
            } finally {
                btn.disabled = false;
            }
        }
        
        //  QUICK ACTIONS - with custom prompts
        const QUICK_ACTIONS = {
            'sync-tasks': { 
                agent: 'amy', 
                taskId: 'sync-tasks', 
                label: 'Sync Tasks',
                prompt: 'Sync all tasks from Google Sheets (Task Base spreadsheet) to dashboard/data/tasks.json. Update MIT list and priority tasks. Report what changed.'
            },
            'check-email': { 
                agent: 'nuria', 
                taskId: 'check-emails', 
                label: 'Check Emails',
                prompt: 'Check Gmail for unread emails. Summarize important ones. Update dashboard/data/emails.json with latest messages. Flag anything urgent.'
            },
            'twitter-scan': { 
                agent: 'pepe', 
                taskId: 'twitter-trends', 
                label: 'Twitter Scan',
                prompt: 'Scan Twitter for mentions of @HartoAtelier, Ordinals trends, NFT news, and AI art topics. Report interesting findings and viral content.'
            },
            'market-check': { 
                agent: 'jack', 
                taskId: 'market-check', 
                label: 'Market Check',
                prompt: 'Check Ordinals marketplace prices. Update floor prices for top collections. Update dashboard/data/marketplace.json. Report significant price movements.'
            }
        };
        
        async function triggerQuickAction(actionId) {
            const btn = document.getElementById(`qa-${actionId}`);
            const action = QUICK_ACTIONS[actionId];
            if (!action) return;
            
            btn.classList.add('loading');
            try {
                // Use custom prompt if available, otherwise use default taskId
                if (action.prompt) {
                    await queueTask(action.agent, action.taskId, action.prompt);
                } else {
                    await queueTask(action.agent, action.taskId, null);
                }
                btn.classList.add('success');
                showToast('Task Queued', `${action.label} sent to ${action.agent.charAt(0).toUpperCase() + action.agent.slice(1)}`, 'success');
                fetchTeamStatusRealtime();
                setTimeout(() => { btn.classList.remove('loading', 'success'); }, 2000);
            } catch (e) {
                console.error('Quick action failed:', e);
                showToast('Error', `Failed to queue ${action.label}`, 'error');
                btn.classList.remove('loading');
            }
        }
        
        //  Ticker Data (BTC, ETH, TIBBIR)
        async function loadTickerData() {
            try {
                // Fetch BTC and ETH from CoinGecko
                const priceRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true');
                if (priceRes.ok) {
                    const prices = await priceRes.json();
                    
                    // BTC
                    const btcPrice = prices.bitcoin?.usd || 0;
                    const btcChange = prices.bitcoin?.usd_24h_change || 0;
                    document.getElementById('tickerBtc').textContent = `$${btcPrice.toLocaleString()}`;
                    const btcChangeEl = document.getElementById('tickerBtcChange');
                    btcChangeEl.textContent = `${btcChange > 0 ? '+' : ''}${btcChange.toFixed(1)}%`;
                    btcChangeEl.className = 'ticker-change ' + (btcChange >= 0 ? 'positive' : 'negative');
                    
                    // ETH
                    const ethPrice = prices.ethereum?.usd || 0;
                    const ethChange = prices.ethereum?.usd_24h_change || 0;
                    document.getElementById('tickerEth').textContent = `$${ethPrice.toLocaleString()}`;
                    const ethChangeEl = document.getElementById('tickerEthChange');
                    ethChangeEl.textContent = `${ethChange > 0 ? '+' : ''}${ethChange.toFixed(1)}%`;
                    ethChangeEl.className = 'ticker-change ' + (ethChange >= 0 ? 'positive' : 'negative');
                }
                
                // Fetch TIBBIR from DexScreener
                const tibbirRes = await fetch('https://api.dexscreener.com/latest/dex/pairs/base/0x0c3b466104545efa096b8f944c1e524e1d0d4888');
                if (tibbirRes.ok) {
                    const data = await tibbirRes.json();
                    const pair = data.pair;
                    if (pair) {
                        const price = parseFloat(pair.priceUsd);
                        const change = pair.priceChange?.h24 || 0;
                        document.getElementById('tickerTibbir').textContent = `$${price.toFixed(3)}`;
                        const tibChangeEl = document.getElementById('tickerTibbirChange');
                        tibChangeEl.textContent = `${change > 0 ? '+' : ''}${parseFloat(change).toFixed(0)}%`;
                        tibChangeEl.className = 'ticker-change ' + (change >= 0 ? 'positive' : 'negative');
                    }
                }
                
                // Fetch Bitcoin block info from mempool.space
                const blockRes = await fetch('https://mempool.space/api/blocks/tip/height');
                if (blockRes.ok) {
                    const blockHeight = await blockRes.text();
                    document.getElementById('tickerBlock').textContent = `Block #${parseInt(blockHeight).toLocaleString()}`;
                }
                
                const feeRes = await fetch('https://mempool.space/api/v1/fees/recommended');
                if (feeRes.ok) {
                    const fees = await feeRes.json();
                    document.getElementById('tickerFee').textContent = `~${fees.fastestFee} sat/vB`;
                }
            } catch (e) {
                console.error('Failed to load ticker data:', e);
            }
        }
        
        //  INVOICE TRACKER
        async function loadInvoiceData() {
            try {
                const res = await fetch('data/invoices.json?t=' + Date.now());
                if (!res.ok) throw new Error('Failed to load invoices');
                
                const data = await res.json();
                const invoices = data.invoices || [];
                
                // Calculate stats
                const pending = invoices.filter(i => i.status === 'pending');
                const drafts = invoices.filter(i => i.status === 'draft');
                const overdue = invoices.filter(i => {
                    if (i.status !== 'pending' || !i.dueDate) return false;
                    return new Date(i.dueDate) < new Date();
                });
                const totalPending = pending.reduce((sum, i) => sum + i.amount, 0);
                
                // Update summary
                document.getElementById('invoiceTotalPending').textContent = `${totalPending.toLocaleString()}`;
                document.getElementById('invoicePendingCount').textContent = pending.length;
                document.getElementById('invoiceDraftCount').textContent = drafts.length;
                document.getElementById('invoiceOverdueCount').textContent = overdue.length;
                
                // Render invoice list
                const container = document.getElementById('invoiceList');
                const invoicesHtml = invoices.slice(0, 5).map(inv => {
                    const dueText = inv.dueDate ? `Vence: ${new Date(inv.dueDate).toLocaleDateString('es-ES', { day: 'numeric', month: 'short' })}` : 'Sin fecha';
                    return `
                        <div class="invoice-item ${inv.status}">
                            <div class="invoice-info">
                                <div class="invoice-project">${inv.project}</div>
                                <div class="invoice-desc">${inv.description}</div>
                                <div class="invoice-meta"> ${inv.assignee}  ${dueText}</div>
                            </div>
                            <div class="invoice-amount">
                                <div class="invoice-value">${inv.amount.toLocaleString()}</div>
                                <div class="invoice-status ${inv.status}">${inv.status.toUpperCase()}</div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                container.innerHTML = invoicesHtml || '<div style="text-align: center; color: var(--muted);">No hay facturas pendientes </div>';
                
            } catch (e) {
                console.error('Failed to load invoice data:', e);
                document.getElementById('invoiceList').innerHTML = '<div style="color: var(--red);"> Error cargando facturas</div>';
            }
        }
        
        //  PROJECTS DATA
        async function loadProjectsData() {
            try {
                const res = await fetch('data/tasks.json?t=' + Date.now());
                if (!res.ok) throw new Error('Failed to load tasks');
                
                const data = await res.json();
                const allTasks = [...(data.mits || []), ...(data.tasks || [])];
                
                // Count tasks by project
                const projects = {};
                allTasks.forEach(task => {
                    const meta = task.meta || '';
                    const project = meta.split('')[1]?.trim() || 'General';
                    if (!projects[project]) projects[project] = { count: 0, urgent: 0 };
                    projects[project].count++;
                    if (task.priority === 'urgent') projects[project].urgent++;
                });
                
                // Define project icons
                const icons = {
                    'ICONIC': '',
                    'Superrare': '',
                    'POL': '',
                    'PFP': '',
                    'Facturas y gastos': '',
                    'ADMINISTRACIN': '',
                    'General': ''
                };
                
                // Render cards
                const container = document.getElementById('projectsGrid');
                const sorted = Object.entries(projects).sort((a, b) => b[1].count - a[1].count);
                
                container.innerHTML = sorted.slice(0, 4).map(([name, data]) => `
                    <div class="project-card" onclick="window.location='tasks.html'">
                        <div class="project-icon">${icons[name] || ''}</div>
                        <div class="project-name">${name.toUpperCase()}</div>
                        <div class="project-tasks">${data.count}</div>
                        <div class="project-label">${data.urgent > 0 ? `${data.urgent} urgent` : 'tasks'}</div>
                    </div>
                `).join('');
                
            } catch (e) {
                console.error('Failed to load projects:', e);
                document.getElementById('projectsGrid').innerHTML = `
                    <div class="project-card" onclick="window.location='tasks.html'">
                        <div class="project-icon"></div>
                        <div class="project-name">TASKS</div>
                        <div class="project-tasks">-</div>
                        <div class="project-label">view all</div>
                    </div>
                `;
            }
        }
        
        //  ACTIVITY DATA
        async function loadActivityData() {
            try {
                const res = await fetch('data/activity.json?t=' + Date.now());
                if (!res.ok) throw new Error('Failed to load activity');
                
                const data = await res.json();
                const commits = data.commits || [];
                
                // Count today's commits
                const todayCommits = commits.filter(c => c.time.includes('minute') || c.time.includes('hour')).length;
                document.getElementById('activityCount').textContent = todayCommits;
                
                // Render activity list
                const container = document.getElementById('activityList');
                const activityHtml = commits.slice(0, 8).map(commit => `
                    <div class="activity-item">
                        <span class="activity-hash">${commit.hash}</span>
                        <div class="activity-info">
                            <div class="activity-message">${commit.message}</div>
                            <div class="activity-time">${commit.time}</div>
                        </div>
                    </div>
                `).join('');
                
                container.innerHTML = activityHtml || '<div style="text-align: center; color: var(--muted);">No hay actividad reciente</div>';
                
            } catch (e) {
                console.error('Failed to load activity data:', e);
                document.getElementById('activityList').innerHTML = '<div style="color: var(--muted);">Sin datos de actividad</div>';
            }
        }
        
        // Initial check and poll
        checkNuriaStatus();
        fetchTeamStatusRealtime();
        setInterval(checkNuriaStatus, 30000);
        setInterval(fetchTeamStatusRealtime, 10000);
        
        // Helper functions
        function parseLocalDate(dateStr) {
            if (!dateStr) return null;
            const [year, month, day] = dateStr.split('-').map(Number);
            return new Date(year, month - 1, day);
        }
        
        function getTodayLocalStr() {
            const now = new Date();
            return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;
        }
        
        function daysUntil(dateStr) {
            if (!dateStr) return Infinity;
            const target = parseLocalDate(dateStr);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            return Math.ceil((target - today) / (1000 * 60 * 60 * 24));
        }
        
        function getNext3Days() {
            const days = [];
            const today = new Date();
            for (let i = 0; i < 3; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                days.push({
                    date: date,
                    dateStr: `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`,
                    isToday: i === 0
                });
            }
            return days;
        }
        
        // Load dashboard data
        async function loadDashboardData() {
            console.log(' Loading dashboard data...');
            try {
                // Load calendar
                const calRes = await fetch('data/calendar.json?t=' + Date.now());
                if (calRes.ok) {
                    const calData = await calRes.json();
                    renderCalendar3Day(calData);
                }
                
                // Load emails
                const emailRes = await fetch('data/emails.json?t=' + Date.now());
                if (emailRes.ok) {
                    const emailData = await emailRes.json();
                    renderEmails(emailData);
                }
                
                // Load tasks
                const tasksRes = await fetch('data/tasks.json?t=' + Date.now());
                if (tasksRes.ok) {
                    const tasksData = await tasksRes.json();
                    renderTasks(tasksData);
                }
                
                // Team status is loaded from Upstash Redis in realtime (fetchTeamStatusRealtime)
                // No need to load from static JSON
                
                // Update timestamp
                const now = new Date();
                const timeStr = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                document.getElementById('dataUpdated').textContent = timeStr;
                console.log(' Dashboard data loaded');
            } catch (err) {
                console.error(' Error loading dashboard data:', err);
            }
        }
        
        //  CALENDAR 3-DAY VIEW
        function renderCalendar3Day(data) {
            updateScheduleDate();
            const container = document.getElementById('calendar3Day');
            const days = getNext3Days();
            
            // Combine today and upcoming events
            const allEvents = [
                ...(data.today || []).map(e => ({ ...e, date: days[0].dateStr })),
                ...(data.upcoming || [])
            ];
            
            const daysHtml = days.map(day => {
                const dayEvents = allEvents.filter(e => e.date === day.dateStr);
                const dayName = day.date.toLocaleDateString('es-ES', { weekday: 'short' }).toUpperCase();
                const dayNum = day.date.getDate();
                
                const eventsHtml = dayEvents.length > 0 
                    ? dayEvents.map(e => {
                        const hasContext = e.context || e.prepared;
                        return `
                            <div class="calendar-event ${hasContext ? 'has-context' : ''}">
                                <div class="calendar-event-time">${e.time}</div>
                                <div class="calendar-event-title">
                                    ${e.title}
                                    ${hasContext ? '<span class="context-badge">PREP</span>' : ''}
                                </div>
                            </div>
                        `;
                    }).join('')
                    : '<div class="no-events">No events</div>';
                
                return `
                    <div class="calendar-day ${day.isToday ? 'today' : ''}">
                        <div class="calendar-day-header">
                            <span class="calendar-day-name">${dayName}</span>
                            <span class="calendar-day-date">${dayNum}</span>
                        </div>
                        ${eventsHtml}
                    </div>
                `;
            }).join('');
            
            container.innerHTML = daysHtml;
        }
        
        function renderEmails(data) {
            document.getElementById('unreadCount').textContent = data.unreadCount;
            
            const emailsHtml = data.emails.map(e => `
                <div class="email-item ${e.unread ? 'unread' : ''}">
                    <div class="email-sender">${e.sender}</div>
                    <div class="email-subject">${e.subject}</div>
                    <div class="email-time">${e.time}</div>
                </div>
            `).join('');
            
            document.getElementById('emailList').innerHTML = emailsHtml;
        }
        
        function renderTasks(data) {
            const allTasks = [
                ...(data.mits || []).map(t => ({ ...t, isMit: true })),
                ...(data.tasks || [])
            ].filter(t => !t.done);
            
            const priorityOrder = { urgent: 0, high: 1, normal: 2, low: 3 };
            allTasks.sort((a, b) => {
                const priorityA = priorityOrder[a.priority] ?? 2;
                const priorityB = priorityOrder[b.priority] ?? 2;
                if (priorityA !== priorityB) return priorityA - priorityB;
                return daysUntil(a.date) - daysUntil(b.date);
            });
            
            document.getElementById('statPendingTasks').textContent = allTasks.length;
            const todoCount = allTasks.filter(t => priorityOrder[t.priority] >= 2).length;
            document.getElementById('statTodoTasks').textContent = todoCount;
            
            const taskList = document.getElementById('priorityTasks');
            const topTasks = allTasks.slice(0, 5);
            
            const tasksHtml = topTasks.map(task => {
                const days = daysUntil(task.date);
                const isUrgentDeadline = days <= 3 && days >= 0;
                const priorityClass = task.priority === 'urgent' || task.priority === 'high' ? 'high' 
                    : task.priority === 'low' ? 'low' : 'medium';
                
                const urgentStyle = isUrgentDeadline ? 'border-color: var(--red); background: rgba(255,68,68,0.1);' : '';
                const deadlineBadge = isUrgentDeadline 
                    ? `<span style="color: var(--red); font-size: 0.7rem; margin-left: 8px; font-weight: 600;"> ${days === 0 ? 'TODAY' : days === 1 ? 'TOMORROW' : days + ' DAYS'}</span>` 
                    : '';
                
                return `
                    <div class="task-item" style="${urgentStyle}">
                        <div class="task-priority ${priorityClass}"></div>
                        <div class="task-content">
                            <div class="task-title">${task.title}${deadlineBadge}</div>
                            <div class="task-meta">${task.meta || ''}</div>
                        </div>
                        <div class="task-owner">${task.isMit ? 'MIT' : 'Task'}</div>
                    </div>
                `;
            }).join('');
            
            taskList.innerHTML = tasksHtml || '<div style="color: var(--muted); padding: 15px;">No pending tasks </div>';
        }
        
        function renderTeamStatus(data) {
            for (const [id, agent] of Object.entries(data.agents)) {
                const card = document.getElementById(`member-${id}`);
                if (!card) continue;
                
                const isWorking = agent.status === 'working';
                card.classList.toggle('working', isWorking);
                
                const statusEl = card.querySelector('.member-status');
                if (statusEl) {
                    statusEl.textContent = isWorking ? ' WORKING' : ' IDLE';
                    statusEl.style.color = isWorking ? 'var(--green)' : 'var(--muted)';
                    statusEl.classList.toggle('idle', !isWorking);
                }
                
                const taskEl = document.getElementById(`task-${id}`);
                if (taskEl) {
                    if (isWorking && agent.task) {
                        taskEl.textContent = agent.task;
                        taskEl.style.color = 'var(--text)';
                    } else if (agent.lastCompleted) {
                        taskEl.textContent = `Last: ${agent.lastCompleted.task}`;
                        taskEl.style.color = 'var(--muted)';
                    } else {
                        taskEl.textContent = '';
                    }
                }
            }
            
            // Update team stats if available
            if (data.stats) {
                const headerInfo = document.querySelector('.team-panel-header > div:last-child');
                if (headerInfo) {
                    headerInfo.innerHTML = `
                        <span id="teamLiveIndicator" style="color: var(--green);"> LIVE</span>  
                        Today: <span style="color: var(--cyan);">${data.stats.tasksCompletedToday || 0}</span> completed  
                        Queue: <span style="color: var(--orange);">${data.stats.totalTasksQueued || 0}</span>
                    `;
                }
            }
            
            const logContainer = document.getElementById('activityLog');
            if (logContainer && data.activityLog) {
                const logHtml = data.activityLog.map(item => `
                    <div class="activity-item">
                        <span class="activity-time">${item.time}</span>
                        <span class="activity-agent">${agentEmojis[item.agent] || ''}</span>
                        <span class="activity-text">${item.action}</span>
                    </div>
                `).join('');
                
                logContainer.innerHTML = `
                    <div class="activity-log-title"> ACTIVITY LOG <span id="logLiveIndicator" style="font-size: 0.6rem; color: var(--green);"> LIVE</span></div>
                    ${logHtml}
                `;
            }
        }
        
    </script>
</body>
</html>
